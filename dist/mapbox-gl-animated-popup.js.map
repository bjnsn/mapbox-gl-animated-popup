{"version":3,"file":"mapbox-gl-animated-popup.js","sources":["../src/index.js"],"sourcesContent":["import {Popup, version as mapboxVersion} from 'mapbox-gl';\n\nconst effects = {\n    linear(t) {\n        return t;\n    },\n\n    easeInQuad(t) {\n        return t * t;\n    },\n\n    easeOutQuad(t) {\n        return -t * (t - 2);\n    },\n\n    easeInOutQuad(t) {\n        if ((t /= 0.5) < 1) {\n            return 0.5 * t * t;\n        }\n        return -0.5 * ((--t) * (t - 2) - 1);\n    },\n\n    easeInCubic(t) {\n        return t * t * t;\n    },\n\n    easeOutCubic(t) {\n        return (t -= 1) * t * t + 1;\n    },\n\n    easeInOutCubic(t) {\n        if ((t /= 0.5) < 1) {\n            return 0.5 * t * t * t;\n        }\n        return 0.5 * ((t -= 2) * t * t + 2);\n    },\n\n    easeInQuart(t) {\n        return t * t * t * t;\n    },\n\n    easeOutQuart(t) {\n        return -((t -= 1) * t * t * t - 1);\n    },\n\n    easeInOutQuart(t) {\n        if ((t /= 0.5) < 1) {\n            return 0.5 * t * t * t * t;\n        }\n        return -0.5 * ((t -= 2) * t * t * t - 2);\n    },\n\n    easeInQuint(t) {\n        return t * t * t * t * t;\n    },\n\n    easeOutQuint(t) {\n        return (t -= 1) * t * t * t * t + 1;\n    },\n\n    easeInOutQuint(t) {\n        if ((t /= 0.5) < 1) {\n            return 0.5 * t * t * t * t * t;\n        }\n        return 0.5 * ((t -= 2) * t * t * t * t + 2);\n    },\n\n    easeInSine(t) {\n        return -Math.cos(t * (Math.PI / 2)) + 1;\n    },\n\n    easeOutSine(t) {\n        return Math.sin(t * (Math.PI / 2));\n    },\n\n    easeInOutSine(t) {\n        return -0.5 * (Math.cos(Math.PI * t) - 1);\n    },\n\n    easeInExpo(t) {\n        return (t === 0) ? 0 : Math.pow(2, 10 * (t - 1));\n    },\n\n    easeOutExpo(t) {\n        return (t === 1) ? 1 : -Math.pow(2, -10 * t) + 1;\n    },\n\n    easeInOutExpo(t) {\n        if (t === 0) {\n            return 0;\n        }\n        if (t === 1) {\n            return 1;\n        }\n        if ((t /= 0.5) < 1) {\n            return 0.5 * Math.pow(2, 10 * (t - 1));\n        }\n        return 0.5 * (-Math.pow(2, -10 * --t) + 2);\n    },\n\n    easeInCirc(t) {\n        if (t >= 1) {\n            return t;\n        }\n        return -(Math.sqrt(1 - t * t) - 1);\n    },\n\n    easeOutCirc(t) {\n        return Math.sqrt(1 - (t -= 1) * t);\n    },\n\n    easeInOutCirc(t) {\n        if ((t /= 0.5) < 1) {\n            return -0.5 * (Math.sqrt(1 - t * t) - 1);\n        }\n        return 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n    },\n\n    easeInElastic(t) {\n        let s = 1.70158;\n        let p = 0;\n        let a = 1;\n        if (t === 0) {\n            return 0;\n        }\n        if (t === 1) {\n            return 1;\n        }\n        if (!p) {\n            p = 0.3;\n        }\n        if (a < 1) {\n            a = 1;\n            s = p / 4;\n        } else {\n            s = p / (2 * Math.PI) * Math.asin(1 / a);\n        }\n        return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * (2 * Math.PI) / p));\n    },\n\n    easeOutElastic(t) {\n        let s = 1.70158;\n        let p = 0;\n        let a = 1;\n        if (t === 0) {\n            return 0;\n        }\n        if (t === 1) {\n            return 1;\n        }\n        if (!p) {\n            p = 0.3;\n        }\n        if (a < 1) {\n            a = 1;\n            s = p / 4;\n        } else {\n            s = p / (2 * Math.PI) * Math.asin(1 / a);\n        }\n        return a * Math.pow(2, -10 * t) * Math.sin((t - s) * (2 * Math.PI) / p) + 1;\n    },\n\n    easeInOutElastic(t) {\n        let s = 1.70158;\n        let p = 0;\n        let a = 1;\n        if (t === 0) {\n            return 0;\n        }\n        if ((t /= 0.5) === 2) {\n            return 1;\n        }\n        if (!p) {\n            p = 0.45;\n        }\n        if (a < 1) {\n            a = 1;\n            s = p / 4;\n        } else {\n            s = p / (2 * Math.PI) * Math.asin(1 / a);\n        }\n        if (t < 1) {\n            return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * (2 * Math.PI) / p));\n        }\n        return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t - s) * (2 * Math.PI) / p) * 0.5 + 1;\n    },\n    easeInBack(t) {\n        const s = 1.70158;\n        return t * t * ((s + 1) * t - s);\n    },\n\n    easeOutBack(t) {\n        const s = 1.70158;\n        return (t -= 1) * t * ((s + 1) * t + s) + 1;\n    },\n\n    easeInOutBack(t) {\n        let s = 1.70158;\n        if ((t /= 0.5) < 1) {\n            return 0.5 * (t * t * (((s *= (1.525)) + 1) * t - s));\n        }\n        return 0.5 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2);\n    },\n\n    easeInBounce(t) {\n        return 1 - effects.easeOutBounce(1 - t);\n    },\n\n    easeOutBounce(t) {\n        if (t < (1 / 2.75)) {\n            return 7.5625 * t * t;\n        }\n        if (t < (2 / 2.75)) {\n            return 7.5625 * (t -= (1.5 / 2.75)) * t + 0.75;\n        }\n        if (t < (2.5 / 2.75)) {\n            return 7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375;\n        }\n        return 7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375;\n    },\n\n    easeInOutBounce(t) {\n        if (t < 0.5) {\n            return effects.easeInBounce(t * 2) * 0.5;\n        }\n        return effects.easeOutBounce(t * 2 - 1) * 0.5 + 0.5;\n    }\n};\n\nconst transforms = {\n    scale: (style, value, reverse) => {\n        style.transform = `scale(${reverse ? 1 - value : value})`;\n    },\n    opacity: (style, value, reverse) => {\n        style.opacity = reverse ? 1 - value : value;\n    }\n}\n\nfunction animate(style, ease, duration, reverse, complete, transform) {\n    let cancel;\n    const applyTransform = typeof transform === 'string' ? (transforms[transform] || transforms.scale) : transform;\n    const start = performance.now();\n\n    const repeat = () => {\n        if (cancel) {\n            return;\n        }\n\n        const elapsed = performance.now() - start;\n        const t = duration === 0 ? 1 : Math.min(elapsed / duration, 1);\n        const value = effects[ease](t);\n\n        applyTransform(style, value, reverse);\n\n        if (t < 1) {\n            requestAnimationFrame(repeat);\n        } else if (complete) {\n            complete();\n        }\n    };\n\n    repeat();\n\n    // Returns the cancel function\n    return () => {\n        cancel = true;\n    };\n}\n\nfunction extend(dest, ...sources) {\n    for (const src of sources) {\n        for (const k in src) {\n            if (typeof src[k] === 'object') {\n                if (!dest[k]) {\n                    dest[k] = {};\n                }\n                extend(dest[k], src[k]);\n            } else {\n                dest[k] = src[k];\n            }\n        }\n    }\n    return dest;\n}\n\nfunction getOriginFromClassList(classList) {\n    for (const className of classList.values()) {\n        const matches = className.match(/mapboxgl-popup-anchor-(.+)/);\n\n        if (matches) {\n            return matches[1].replace('-', ' ');\n        }\n    }\n}\n\nconst defaultOptions = {\n    openingAnimation: {\n        transform: 'scale',\n        duration: 1000,\n        easing: 'easeOutElastic'\n    },\n    closingAnimation: {\n        transform: 'scale',\n        duration: 300,\n        easing: 'easeInBack'\n    },\n};\n\n/**\n * An animated popup component.\n *\n * @param {Object} [options]\n * @param {Object} [options.openingAnimation] - Options controlling the opening\n *   animation.\n * @param {Object} [options.openingAnimation.duration=1000] - The animation's duration,\n *   measured in milliseconds.\n * @param {Object} [options.openingAnimation.easing] - The easing function name of\n *   the animation. See https://easings.net\n * @param {Object} [options.closingAnimation='easeOutElastic'] - Options controlling\n *   the closing animation.\n * @param {Object} [options.closingAnimation.duration=300] - The animation's duration,\n *   measured in milliseconds.\n * @param {Object} [options.closingAnimation.easing='easeInBack'] - The easing function\n *   name of the animation. See https://easings.net\n */\nexport default class AnimatedPopup extends Popup {\n\n    constructor(options) {\n        super(options);\n        extend(this.options, extend({}, defaultOptions, options));\n    }\n\n    addTo(...args) {\n        if (this._map) {\n            // Remove the popup synchronously\n            this._remove();\n        }\n\n        return super.addTo(...args);\n    }\n\n    _remove() {\n        const wrapperContainer = this._wrapperContainer;\n\n        if (this._cancelAnimation) {\n            this._cancelAnimation();\n        }\n\n        if (wrapperContainer && wrapperContainer.parentNode) {\n            wrapperContainer.parentNode.removeChild(wrapperContainer);\n            delete this._wrapperContainer;\n        }\n\n        super.remove();\n    }\n\n    remove() {\n        if (this._wrapperContainer) {\n            const {easing, duration, transform} = this.options.closingAnimation;\n\n            if (this._cancelAnimation) {\n                this._cancelAnimation();\n            }\n            this._cancelAnimation = animate(this._container.style, easing, duration, true, () => {\n                // When the animation completes, the popup is fully removed\n                this._remove();\n            }, transform);\n        } else {\n            super.remove();\n        }\n\n        return this;\n    }\n\n    _update(...args) {\n        const hasPosition = this._lngLat || this._trackPointer;\n\n        if (!this._map || !hasPosition || !this._content) {\n            return;\n        }\n\n        const _requestDomTask = this._map._requestDomTask;\n        let wrapperContainer = this._wrapperContainer;\n        let innerContainer = this._container;\n        let transform;\n\n        // If a container is assigned, create its wrapper container\n        Object.defineProperty(this, '_container', {\n            configurable: true,\n            get: () => innerContainer,\n            set: container => {\n                const {easing, duration, transform} = this.options.openingAnimation;\n\n                wrapperContainer = this._wrapperContainer = document.createElement('div');\n                wrapperContainer.className = 'mapboxgl-popup-wrapper';\n                wrapperContainer.style.position = 'absolute';\n                wrapperContainer.style.willChange = 'transform';\n                wrapperContainer.style.pointerEvents = 'none';\n\n                innerContainer = container;\n                innerContainer.style.position = 'relative';\n\n                this._map.getContainer().appendChild(wrapperContainer);\n                wrapperContainer.appendChild(innerContainer);\n\n                this._cancelAnimation = animate(innerContainer.style, easing, duration, false, null, transform);\n            }\n        });\n\n        if (mapboxVersion >= '2.3') {\n            // Extend _requestDomTask to handle transform changes\n            this._map._requestDomTask = fn => {\n                _requestDomTask.call(this._map, () => {\n                    transform = innerContainer ? innerContainer.style.transform : 'scale(0)';\n\n                    fn();\n\n                    // Apply transform to wrapper\n                    wrapperContainer.style.transform = innerContainer.style.transform;\n                    innerContainer.style.transform = transform;\n\n                    // Set the transform-origin property based on the anchor position\n                    innerContainer.style.transformOrigin = getOriginFromClassList(innerContainer.classList);\n                });\n            };\n        } else {\n            transform = innerContainer ? innerContainer.style.transform : 'scale(0)';\n        }\n\n        super._update(...args);\n\n        delete this._container;\n        this._container = innerContainer;\n\n        if (mapboxVersion >= '2.3') {\n            // Revert _requestDomTask\n            this._map._requestDomTask = _requestDomTask;\n        } else {\n            // Apply transform to wrapper\n            wrapperContainer.style.transform = innerContainer.style.transform;\n            innerContainer.style.transform = transform;\n\n            // Set the transform-origin property based on the anchor position\n            innerContainer.style.transformOrigin = getOriginFromClassList(innerContainer.classList);\n        }\n    }\n\n}\n"],"names":["Popup","mapboxVersion"],"mappings":"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"}